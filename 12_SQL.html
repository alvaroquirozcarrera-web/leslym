<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Clase 12: SQL Server ‚Äî Disparadores (Triggers) y Automatizaci√≥n</title>
    <style>
        /* --- VARIABLES CSS & RESET --- */
        :root {
            --primary-color: #0078d4; /* Azul SQL Server */
            --secondary-color: #2d2d2d;
            --accent-color: #e1f5fe;
            --text-color: #333333;
            --bg-color: #f8f9fa;
            --code-bg: #1e1e1e;
            --code-text: #d4d4d4;
            --keyword: #569cd6;
            --string: #ce9178;
            --number: #b5cea8;
            --white: #ffffff;
            --shadow: 0 4px 6px rgba(0,0,0,0.1);
            --radius: 8px;
            --spacing: 2rem;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: var(--text-color);
            background-color: var(--bg-color);
        }

        /* --- LAYOUT GENERAL --- */
        .container { max-width: 1000px; margin: 0 auto; padding: 0 20px; }

        header {
            background: linear-gradient(135deg, var(--primary-color), #005a9e);
            color: var(--white);
            padding: 3rem 0 4rem 0; 
            margin-bottom: 2rem;
            box-shadow: var(--shadow);
        }

        /* --- BOT√ìN DE NAVEGACI√ìN --- */
        .nav-bar { margin-top: 2rem; text-align: right; }

        .nav-btn {
            background-color: var(--white);
            color: var(--primary-color);
            border: none;
            padding: 12px 25px;
            border-radius: 50px;
            text-decoration: none;
            font-weight: bold;
            font-size: 1rem;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.2);
        }

        .nav-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,0,0,0.3);
            background-color: #f0f8ff;
        }

        .nav-btn svg { width: 20px; height: 20px; fill: currentColor; }

        h1 { font-size: 2.5rem; margin-bottom: 0.5rem; }
        h2 { color: var(--primary-color); margin-bottom: 1.5rem; border-bottom: 2px solid var(--accent-color); padding-bottom: 0.5rem; }
        h3 { margin-bottom: 1rem; color: var(--secondary-color); }
        h4 { margin-bottom: 0.5rem; color: var(--primary-color); font-size: 1.1rem; }

        /* --- SECCIONES Y TARJETAS --- */
        section {
            background: var(--white);
            border-radius: var(--radius);
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: var(--shadow);
        }

        .intro-list {
            list-style: none;
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .intro-list li {
            background: var(--accent-color);
            color: var(--primary-color);
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-weight: 600;
        }

        .context-box {
            background-color: #fff3cd;
            border-left: 5px solid #ffc107;
            padding: 1.5rem;
            margin-bottom: 2rem;
            border-radius: 4px;
        }

        /* --- COMPONENTE: PREGUNTA - C√ìDIGO - RESPUESTA --- */
        .lesson-step {
            border: 1px solid #e0e0e0;
            border-radius: var(--radius);
            margin-bottom: 2.5rem;
            overflow: hidden;
            transition: transform: 0.2s ease;
        }

        .lesson-step:hover { transform: translateY(-2px); box-shadow: 0 8px 15px rgba(0,0,0,0.1); }

        .step-header {
            background-color: var(--secondary-color);
            color: var(--white);
            padding: 1rem 1.5rem;
            font-weight: bold;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .step-badge {
            background: var(--primary-color);
            font-size: 0.8rem;
            padding: 2px 8px;
            border-radius: 4px;
            margin-right: 10px;
            text-transform: uppercase;
        }

        .step-content { padding: 1.5rem; }
        .question-box { margin-bottom: 1rem; font-style: italic; font-size: 1.1rem; color: #555; }

        /* --- WRAPPER Y BOT√ìN DE COPIAR --- */
        .code-wrapper { position: relative; margin-bottom: 1.5rem; }

        .copy-btn {
            position: absolute; top: 10px; right: 10px;
            background: rgba(255,255,255, 0.1);
            border: 1px solid rgba(255,255, 255, 0.2);
            color: #fff; border-radius: 4px;
            padding: 5px 8px; cursor: pointer;
            opacity: 0.7; transition: all 0.2s ease;
            display: flex; align-items: center; justify-content: center; z-index: 10;
        }

        .copy-btn:hover { opacity: 1; background: rgba(255,255, 255, 0.2); }
        .copy-btn svg { width: 18px; height: 18px; fill: currentColor; }
        .copy-btn.copied { background-color: #28a745; border-color: #28a745; opacity: 1; }

        /* --- BLOQUES DE C√ìDIGO --- */
        pre {
            background-color: var(--code-bg);
            color: var(--code-text);
            padding: 1.5rem; padding-top: 2.5rem;
            border-radius: var(--radius);
            overflow-x: auto;
            font-family: 'Consolas', 'Monaco', monospace;
            border-left: 4px solid var(--primary-color);
            margin: 0;
        }

        /* Sintaxis SQL */
        .kw { color: var(--keyword); font-weight: bold; }
        .str { color: var(--string); }
        .num { color: var(--number); }
        .type { color: #4ec9b0; }
        .func { color: #dcdcaa; }
        .comment { color: #6a9955; font-style: italic; }

        /* Colores espec√≠ficos para Triggers y Constraints */
        .pk { color: #d7ba7d; font-weight: bold; }
        .fk { color: #d08070; font-weight: bold; }
        .uq { color: #ff00ff; font-weight: bold; }

        /* --- EXPLICACI√ìN Y TABLAS --- */
        .explanation {
            background-color: var(--bg-color);
            padding: 1rem;
            border-radius: var(--radius);
            border: 1px solid #ddd;
            margin-bottom: 1.5rem;
        }

        .result-table-wrapper { overflow-x: auto; margin-top: 1rem; margin-bottom: 1.5rem; }
        table { width: 100%; border-collapse: collapse; font-size: 0.95rem; }
        th, td { text-align: left; padding: 12px; border-bottom: 1px solid #ddd; }
        th { background-color: var(--primary-color); color: var(--white); }
        tr:nth-child(even) { background-color: var(--bg-color); }

        /* Subt√≠tulos internos */
        .sub-example-title {
            margin-top: 1.5rem;
            font-weight: bold;
            color: var(--secondary-color);
            display: block;
            border-bottom: 1px dashed #ccc;
            padding-bottom: 5px;
        }

        /* --- RESUMEN FINAL --- */
        .summary-table th, .summary-table td { border: 1px solid #ddd; }
        code.inline { background: #eee; padding: 2px 5px; border-radius: 3px; font-family: monospace; color: #d63384; }

        /* --- ALERTAS (DELETE PRECAUCI√ìN) --- */
        .warning-box {
            background-color: #fff0f0;
            border: 1px solid #dc3545;
            color: #721c24;
            padding: 1rem 1rem 1.5rem;
            border-radius: 4px;
            border-left: 5px solid #dc3545;
            margin-bottom: 1.5rem;
        }

        /* --- TABLA DE AUDITOR√çA (RESALTADO ESPECIAL) --- */
        .audit-table th { background-color: #f1c8e3; color: #555; font-size: 0.9em; font-weight: bold; } /* Fondo claro para resaltar auditor√≠a */

        footer {
            text-align: center; padding: 2rem; color: #666; font-size: 0.9rem;
            border-top: 1px solid #eee; margin-top: 3rem;
        }

        /* Responsive */
        @media (max-width: 600px) {
            h1 { font-size: 1.8rem; }
            .nav-bar { text-align: center; margin-top: 1.5rem; }
            .step-header { flex-direction: column; align-items: flex-start; gap: 0.5rem; }
        }
    </style>
</head>
<body>

    <header>
        <div class="container">
            <h1>Clase 12 de 14 ‚Äî Disparadores (Triggers) y Automatizaci√≥n</h1>
            <p>üéØ Procedimientos Almacenados y Automatizaci√≥n</p>

            <!-- BOT√ìN DE NAVEGACI√ìN -->
            <div class="nav-bar">
                <a href="13_SQL.HTML" class="nav-btn">
                    Ir a Siguiente Clase (Clase 13)
                    <svg viewBox="0 0 24 24"><path d="M12 4l-1.41 1.41L16.17 11H4v2h12.17l-5.58 5.59L12 20l8-8z"/></svg>
                </a>
            </div>
        </div>
    </header>

    <main class="container">

        <!-- Objetivos -->
        <section id="objetivos">
            <h2>Objetivo de la clase</h2>
            <ul class="intro-list">
                <li>Crear procedimientos almacenados (CREATE PROCEDURE)</li>
                <li>Diferencias entre SPs y Funciones</li>
                <li>Triggers para INSERT, UPDATE y DELETE</li>
                <li>Proteger datos con INSTEAD OF y ROLLBACK</li>
            </ul>
        </section>

        <!-- Contexto -->
        <div class="context-box">
            <h3>üè¢ Contexto real: Empresa Global</h3>
            <p>Sigues trabajando en Empresa Global. Los analistas de RRHH necesitan ejecutar las mismas consultas todos los d√≠as (ej. reportes de ventas, controles de sueldos). En lugar de escribir el c√≥digo SQL todos los d√≠as, usaremos **Stored Procedures** (Procedimientos Almacenados).</p>
        </div>

        <!-- Paso 1: Teor√≠a -->
        <section>
            <h2>üîπ 1. ¬øQu√© es un Stored Procedure (Procedimiento Almacenado)?</h2>
            <p>Es un bloque de c√≥digo SQL guardado en la base de datos que se puede llamar con un comando simple. Es ideal para l√≥gica de negocio compleja, pero no para c√°lculos de filas individuales.</p>
            <br>
            <p><strong>üìñ Diferencia con Funciones:</strong></p>
            <ul>
                <li><strong>Stored Procedure:</strong> Puede hacer INSERTs, UPDATEs, DELETEs y SELECTs complejos. Devuelve una tabla o un n√∫mero.</li>
                <li><strong>Funci√≥n:</strong> Es para c√°lculos r√°pidos (ej. total ganancia) o validaciones. Devuelve un solo valor (scalar) o una tabla (Table-Valued Function).</li>
            </ul>
            <br>
            <p><strong>üìñ Eventos de Disparador (Trigger):</strong></p>
            <ul>
                <li>Se ejecutan autom√°ticamente ante eventos (INSERT, UPDATE, DELETE).</li>
                <li>Sirven para automatizar tareas como: guardar en un LOG de auditor√≠a o enviar correos.</li>
                <li>Tipo: AFTER (DESPU√âS).</li>
            </ul>
        </section>

        <!-- Paso 2: Tablas -->
        <section>
            <h2>üîπ 2. Las tablas de trabajo</h2>
            <p>Necesitamos una tabla de empleados y una tabla de auditor√≠a para guardar los eventos.</p>
            <br>

            <h4>üß© Tabla Empleados</h4>
            <div class="result-table-wrapper">
                <table>
                    <thead><tr><th>IdEmpleado</th><th>Nombre</th><th>Cargo</th><th>Sueldo</th><th>IdDepartamento</th></tr></thead>
                    <tbody>
                        <tr><td>1</td><td>Ana Torres</td><td>Desarrolladora</td><td>4800.00</td><td>2</td></tr>
                        <tr><td>2</td><td>Luc√≠a P√©rez</td><td>Analista QA</td><td>5200.00</td><td>1</td></tr>
                        <tr><td>3</td><td>Sof√≠a Ramos</td><td>Dise√±adora UX</td><td>4700.00</td><td>2</td></tr>
                        <tr><td>4</td><td>Jos√© Torres</td><td>Desarrollador</td><td>5100.00</td><td>2</td></tr>
                        <tr><td>5</td><td>Daniel Rojas</td><td>Gerente Producto</td><td>7500.00</td><td>1</td></tr>
                    </tbody>
                </table>
            </div>
            <br>

            <h4>üß© Tabla Auditor√≠aEmpleados (Auditoria)</h4>
            <div class="result-table-wrapper">
                <table class="audit-table">
                    <thead><tr><th>IdAuditoria</th><th>Operaci√≥n</th><th>NombreEmpleado</th><th>Usuario</th><th>Fecha</th></tr></thead>
                    <tbody>
                        <tr><td>1</td><td>INSERT</td><td>Ana Torres</td><td><span style="color: #008000;">SYSTEM_USER</span></td><td>2025-10-01</td></tr>
                        <tr><td>2</td><td>UPDATE</td><td>Luc√≠a P√©rez</td><td><span style="color: #008000;">SYSTEM_USER</span></td><td>2025-10-02</td></tr>
                        <tr><td>3</td><td>DELETE</td><td>Daniel Rojas</td><td><span style="color: #008000;">SYSTEM_USER</span></td><td>2025-10-03</td></tr>
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Paso 3: INSERT Trigger -->
        <article class="lesson-step">
            <div class="step-header">
                <span><span class="step-badge">Paso 3</span> Trigger para INSERT (Auditor√≠a al insertar)</span>
            </div>
            <div class="step-content">
                <div class="question-box">
                    ‚ùì <strong>Pregunta:</strong> Cada vez que se inserta un nuevo empleado, queremos guardar el registro en la tabla de auditor√≠a.
                </div>

                <div class="code-wrapper">
                    <button class="copy-btn" aria-label="Copiar c√≥digo">
                        <svg viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2zm0 16H8V7h11v14z"/></svg>
                    </button>
                    <pre><code><span class="kw">CREATE TRIGGER</span> trg_Auditoria_Insert
<span class="kw">ON</span> Empleados
<span class="kw">AFTER INSERT</span>
<span class="kw">AS</span>
<span class="kw">BEGIN</span>
    <span class="kw">INSERT INTO</span> AuditoriaEmpleados (Operacion, NombreEmpleado)
    SELECT <span class="str">'INSERT'</span>, <span class="kw">inserted.Nombre</span>, <span class="kw">SYSTEM_USER</span>
    <span class="kw">FROM</span> <span class="comment">-- inserted y deleted son tablas virtuales</span> inserted;
<span class="kw">END;</span></code></pre>
                </div>

                <div class="explanation">
                    <p><strong>üß© Explicaci√≥n:</strong></p>
                    <ul>
                        <li><code>CREATE TRIGGER trg_Auditoria_Insert</code> ‚Üí Define el nombre del trigger.</li>
                        <li><code>ON Empleados AFTER INSERT</code> ‚Üí Se dispara cada que se inserte en la tabla `Empleados`.</li>
                        <li><code>SELECT ... inserted.Nombre</code> ‚Üí Extrae el nombre del empleado reci√©n insertado para la auditor√≠a.</li>
                        <li><code>SYSTEM_USER</code> ‚Üí Identifica al usuario del sistema que hizo la acci√≥n.</li>
                    </ul>
                </div>
            </div>
        </article>

        <!-- Paso 4: UPDATE Trigger -->
        <article class="lesson-step">
            <div class="step-header">
                <span><span class="step-badge">Paso 4</span> Trigger para UPDATE (Auditor√≠a al modificar)</span>
            </div>
            <div class="step-content">
                <div class="question-box">
                    ‚ùì <strong>Pregunta:</strong> Queremos registrar en la auditor√≠a si alguien modifica datos cr√≠ticos (ej. el sueldo).
                </div>

                <div class="code-wrapper">
                    <button class="copy-btn" aria-label="Copiar c√≥digo">
                        <svg viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/></svg>
                    </button>
                    <pre><code><span class="kw">CREATE TRIGGER</span> trg_Auditoria_Update
<span class="kw">ON</span> Empleados
<span class="kw">AFTER UPDATE</span>
<span class="kw">AS</span>
<span class="kw">BEGIN</span>
    <span class="kw">INSERT INTO</span> AuditoriaEmpleados (Operacion, NombreEmpleado, Usuario)
    SELECT <span class="str">'UPDATE'</span>, deleted.Nombre, <span class="kw">SYSTEM_USER</span>
    <span class="kw">FROM</span> deleted;
<span class="kw">END;</span></code></pre>
                </div>

                <div class="explanation">
                    <p><strong>üß© Explicaci√≥n:</strong></p>
                    <ul>
                        <li><code>deleted</code> ‚Üí Tabla virtual que contiene los datos de la fila modificada antes del cambio.</li>
                        <li><code>SELECT ... FROM deleted</code> ‚Üí Obtiene el nombre del empleado tal cual era antes de la actualizaci√≥n.</li>
                        <li>As√≠ guardamos qui√©n cambi√≥ qu√©.</li>
                    </ul>
                </div>
            </div>
        </article>

        <!-- Paso 5: DELETE Trigger (L√≥gica de protecci√≥n) -->
        <article class="lesson-step">
            <div class="step-header">
                <span><span class="step-badge">Paso 5</span> Trigger para DELETE (Protecci√≥n de datos)</span>
            </div>
            <div class="step-content">
                <div class="question-box">
                    ‚ùì <strong>Pregunta:</strong> Queremos prohibir que se puedan borrar empleados del departamento de Direcci√≥n (IdDepto = 1) por error.
                </div>

                <div class="code-wrapper">
                    <button class="copy-btn" aria-label="Copiar c√≥digo">
                        <svg viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/></svg>
                    </button>
                    <pre><code><span class="kw">CREATE TRIGGER</span> trg_BorrarDeptoUno
<span class="kw">ON</span> Empleados
<span class="kw">INSTEAD OF</span> (SELECT IdDepartamento <span class="kw">FROM</span> deleted
<span class="kw">WHERE</span> deleted.IdDepartamento = 1
        )
<span class="kw">AS</span>
<span class="kw">BEGIN</span>
    <span class="kw">PRINT</span> <span class="str">'‚ö†Ô∏è No se permite borrar empleados de Direcci√≥n.';
    <span class="kw">ROLLBACK</span> <span class="kw">END</span>;</code></pre>
                </div>

                <div class="explanation">
                    <p><strong>üß© Explicaci√≥n (Importante!):</strong></p>
                    <ul>
                        <li><code>INSTEAD OF ... ROLLBACK</code> ‚Üí Este es el coraz√≥n del ejemplo. Si el usuario intenta eliminar un empleado del departamento 1:</li>
                            <li><code>INSTEAD OF ...</code> ‚Üí El sistema "detecta" el intento antes del borrado.</li>
                            <li><code>ROLLBACK;</code> ‚Üí Cancela el borrado y muestra el mensaje de error.</li>
                            <li>¬°As√≠ protegemos la integridad de los datos cr√≠ticos!</li>
                    </ul>
                </div>
            </div>
        </article>

        <!-- Paso 6: Ver Triggers -->
        <section>
            <h2>üîπ 6. Ver y Administrar Triggers</h2>
            <p>Para ver los triggers creados y la tabla de auditor√≠a:</p>
            <br>
            
            <div class="code-wrapper">
                <button class="copy-btn" aria-label="Copiar c√≥digo">
                    <svg viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2zm0 16H8V7h11v14z"/></svg>
                </button>
                <pre><code><span class="kw">EXEC</span> sp_HelpEmpleados;</code></pre>
            </div>

            <div class="explanation">
                <p>Si el procedimiento <code>sp_HelpEmpleados</code> contiene consultas (o ejecuciones), al ejecutarlo tambi√©n se mostrar√°n los resultados de la tabla <code>AuditoriaEmpleados</code>.</p>
            </div>

            <!-- Vista de Auditor√≠a -->
            <div class="result-table-wrapper">
                <table class="audit-table">
                    <thead><tr><th>IdAuditoria</th><th>Operaci√≥n</th><th>NombreEmpleado</th><th>Usuario</th><th>Fecha</th></tr></thead>
                    <tbody>
                        <tr><td>1</td><td>INSERT</td><td>Ana Torres</td><td><span style="color: #008000;">SYSTEM_USER</span></td><td>2025-10-01</td></tr>
                        <tr><td>2</td><td>UPDATE</td><td>Luc√≠a P√©rez</td><td><span style="color: #008000;">SYSTEM_USER</span></td><td>2025-10-02</td></tr>
                        <tr><td>3</td><td>DELETE</td><td>Daniel Rojas</td><td><span style="color: #008000;">SYSTEM_USER</span></td><td>2025-10-03</td></tr>
                    </tbody>
                </table>
            </div>
        </section>

        <!-- Eliminar Triggers -->
        <article class="lesson-step">
            <div class="step-header">
                <span><span class="step-badge">Paso 7</span> Eliminar Triggers (DROP TRIGGER)</span>
            </div>
            <div class="step-content">
                <div class="question-box">
                    ‚ùì <strong>Pregunta:</strong> Ya no necesitamos el trigger de auditor√≠a. ¬øC√≥mo lo eliminamos?
                </div>

                <div class="code-wrapper">
                    <button class="copy-btn" aria-label="Copiar c√≥digo">
                        <svg viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/></svg>
                    </button>
                    <pre><code><span class="kw">DROP TRIGGER</span> trg_Auditoria_Insert;
<span class="kw">DROP TRIGGER</span> trg_Auditoria_Update;
<span class="kw">DROP TRIGGER</span> trg_BorrarDeptoUno;</code></pre>
                </div>

                <div class="explanation">
                    <p><strong>üß© Explicaci√≥n:</strong></p>
                    <ul>
                        <li><code>DROP TRIGGER</code> ‚Üí Borra el trigger espec√≠fico de la tabla.</li>
                        <li>¬°Cuidado! Si borras el trigger, las futuras modificaciones ya no se registrar√°n en la tabla <code>AuditoriaEmpleados</code>.</li>
                    </ul>
                </div>
            </div>
        </article>

        <!-- Resumen -->
        <section>
            <h2>üßæ Resumen de la Clase 12</h2>
            <div class="result-table-wrapper">
                <table class="summary-table">
                    <thead>
                        <tr>
                            <th>Tema</th>
                            <th>Comando SQL</th>
                            <th>Descripci√≥n</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><strong>CREATE PROCEDURE</strong></td>
                            <td><code>CREATE PROCEDURE sp_Nombre ... BEGIN ... END;</code></td>
                            <td>Crea procedimientos reutilizables y almacenados en el servidor.</td>
                        </tr>
                        <tr>
                            <td><strong>EXEC</strong></td>
                            <td><code>EXEC sp_Nombre @Parametro;</code></td>
                            <td>Permite ejecutar procedimientos con par√°metros de entrada.</td>
                        </tr>
                        <tr>
                            <td><strong>TRIGGER</strong></td>
                            <td><code>CREATE TRIGGER ... ON Tabla AFTER INSERT/DELETE/UPDATE</code></td>
                            <td>Automatiza tareas (auditor√≠a, restricciones complejas) ante eventos.</td>
                        </tr>
                        <tr>
                            <td><strong>INSTEAD OF</strong></td>
                            <td><code>... INSTEAD OF ... ROLLBACK;</code></td>
                            <td>Controla eventos como el DELETE para evitar errores (ej. borrar departamentos protegidos).</td>
                        </tr>
                        <tr>
                            <td><strong>DROP TRIGGER</strong></td>
                            <td><code>DROP TRIGGER tr_Nombre;</code></td>
                            <td>Elimina un trigger espec√≠fico de la base de datos.</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <br>
            <h4>‚úÖ Has aprendido a:</h4>
            <ul>
                <li>Crear procedimientos (SPs) para tareas repetitivas.</li>
                <li>Diferenciar entre SPs, Triggers y Vistas.</li>
                <li>Usar triggers para automatizar auditor√≠a y control de datos.</li>
                <li>Usar INSTEAD OF para proteger reglas de negocio.</li>
            </ul>
        </section>

    </main>

    <footer>
        <p>&copy; 2023 Curso de SQL Server - Clase 12</p>
    </footer>

    <!-- SCRIPT PARA COPIAR C√ìDIGO -->
    <script>
        document.querySelectorAll('.copy-btn').forEach(button => {
            button.addEventListener('click', () => {
                const pre = button.nextElementSibling;
                const code = pre.querySelector('code');
                const textToCopy = code.innerText;

                navigator.clipboard.writeText(textToCopy).then(() => {
                    const originalHTML = button.innerHTML;
                    button.classList.add('copied');
                    button.innerHTML = `<svg viewBox="0 0 24 24"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/></svg>`;
                    
                    setTimeout(() => {
                        button.innerHTML = originalHTML;
                        button.classList.remove('copied');
                    }, 2000);
                }).catch(err => {
                    console.error('Error al copiar:', err);
                    alert('Hubo un error al intentar copiar el c√≥digo.');
                });
            });
        });
    </script>
</body>
</html>